<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }}</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-main: #1a1a1a;
            --name-color: #999999;
            --jp-color: #bbbbbb;
            --font-size: 13px;
        }
        body, html {
            background-color: var(--bg-color);
            margin: 0; padding: 0;
            height: 100%; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            cursor: crosshair;
            font-family: "Hiragino Mincho ProN", "MS Mincho", "Noto Serif SC", serif;
            -webkit-font-smoothing: antialiased;
        }
        #stage { max-width: 550px; width: 85%; min-height: 280px; }
        .line { margin-bottom: 2.8em; line-height: 2; font-size: var(--font-size); opacity: 0; transition: opacity 1.8s ease; }
        .show { opacity: 1; }
        .name { font-size: 11px; color: var(--name-color); display: block; margin-bottom: 5px; letter-spacing: 2px; }
        .jp { font-size: 12px; color: var(--jp-color); display: block; margin-bottom: 2px; }
        .monologue { color: #ccc; font-style: italic; }
        #hint { position: fixed; bottom: 40px; font-size: 9px; color: #f0f0f0; letter-spacing: 4px; text-transform: uppercase; }
    </style>
</head>
<body onclick="advance()">
    <div id="stage"></div>
    <div id="hint">NEXT</div>

    <script>
        const story = [
            { type: 'title', text: '1. 现实【愿你被世界簇拥，熠熠生辉】' },
            { type: 'shio', name: '汐', jp: 'ねえ、ハル。この街、遠くから見るとまだ綺麗だね。', text: '呐，悠。这座城市，从远处看还是挺漂亮的呢。' },
            { type: 'haru', name: '悠', jp: '……そうだね。壊れているところが見えないだけかもしれないけど。', text: '……是啊。也许只是因为看不见坏掉的地方罢了。' },
            { type: 'title', text: '3. 现实【愿你的眼中，永远有我的轮廓】' },
            { type: 'shio', name: '汐', jp: '私の顔、ちゃんと見えてる？', text: '我的脸，能好好看清吗？' },
            { type: 'haru', name: '悠', jp: '……毎日見てる。', text: '……每天都在看。' },
            { type: 'shio', name: '汐', jp: '君が見てるのは‘検体’としての私。', text: '你看的是作为“检体”的我。' },
            { type: 'shio', name: '汐', jp: '……ハル、今の私の瞳、何色に見える？', text: '……悠，我现在的瞳孔，在你看来是什么颜色？' },
            { type: 'haru', name: '悠', jp: '……濁った、灰色だ。', text: '……浑浊的，灰色。' },
            { type: 'title', text: '8. 现实【愿，盛开在你的世界】' },
            { type: 'shio', name: '汐', jp: '私はここにいるよ。', text: '我就在这里哦。' },
            { type: 'shio', name: '汐', jp: '君が歩く道のそばに、名前も知らない花として咲いているから。', text: '会在你行走的路旁，作为一朵无名的花盛开着。' },
            { type: 'mono', text: '（世界归于纯白。数据观测结束。）' }
        ];

        let index = 0;
        const stage = document.getElementById('stage');

        function advance() {
            if (index >= story.length) {
                document.body.style.transition = "opacity 2s";
                document.body.style.opacity = "0";
                setTimeout(() => { window.location.href = "/"; }, 2000);
                return;
            }
            const data = story[index];
            if (data.type === 'title' || index % 4 === 0) {
                stage.style.opacity = 0;
                setTimeout(() => {
                    stage.innerHTML = '';
                    render(data);
                    stage.style.opacity = 1;
                }, 800);
            } else {
                render(data);
            }
            index++;
        }

        function render(d) {
            const div = document.createElement('div');
            div.className = `line ${d.type}`;
            let h = '';
            if (d.name) h += `<span class="name">${d.name}</span>`;
            if (d.jp) h += `<span class="jp">${d.jp}</span>`;
            h += `<span class="content">${d.text}</span>`;
            div.innerHTML = h;
            stage.appendChild(div);
            setTimeout(() => div.classList.add('show'), 100);
        }
        advance();
    </script>
</body>
</html>
